{"version":3,"sources":["../../src/errors/createError.ts","../../src/errors/errors.ts","../../src/util/encoding/stringFromBuffer.ts","../../src/util/encoding/textEncoder.ts","../../src/util/getWindow.ts","../../src/util/encoding/toBase64.ts","../../src/util/encoding/toUrlEncodedBase64.ts","../../src/util/crypto/getCrypto.ts","../../src/util/crypto/getRandomBytes.ts","../../src/util/crypto/getCryptoSubtle.ts","../../src/util/crypto/sha256.ts","../../src/util/crypto/createCodeChallengeAndVerifier.ts","../../src/util/encoding/fromBase64.ts","../../src/util/encoding/textDecoder.ts","../../src/util/uniqueElementsFromArray.ts","../../src/util/getSortedScope.ts","../../src/util/objectFromURLSearchParams.ts","../../src/util/objectToKey.ts","../../src/util/index.ts","../../src/util/crypto/verifyIdToken.ts","../../src/util/encoding/decodeState.ts","../../src/util/encoding/encodeState.ts","../../src/util/objectFromEntries.ts","../../src/util/retry.ts","../../src/api/ApiError.ts","../../src/api/Api.ts","../../src/ClientStore.ts","../../src/store/StorageStore.ts","../../src/Client.ts","../../src/DefaultIPFSResolver.ts","../../src/DefaultIssuerResolver.ts","../../src/DefaultWebFingerResolver.ts","../../src/MemoryDomainResolver.ts","../../src/MemoryWebFingerResolver.ts","../../src/JRD.ts","../../src/styles.ts","../../src/DomUI.ts","../node_modules/@uauth/dom-ui/node_modules/@emotion/sheet/dist/emotion-sheet.browser.esm.js","../node_modules/@uauth/dom-ui/node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","../node_modules/@uauth/dom-ui/node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js","../node_modules/@uauth/dom-ui/node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","../node_modules/@uauth/dom-ui/node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js","../node_modules/@uauth/dom-ui/node_modules/@emotion/css/dist/emotion-css.esm.js"],"names":["message","r","_this","name","Error","String","fromCharCode","apply","from","Uint8Array","buf","TextEncoder","getWindow","window","toBase64","str","toUrlEncodedBase64","replace","crypto","msCrypto","getRandomBytes","getRandomValues","length","getCrypto","subtle","webkitSubtle","digestOp","digest","Promise","rej","oncomplete","res","target","result","onerror","e","atob","textDecoder","TextDecoder","Array","Set","arr","uniqueElementsFromArray","trim","split","sort","objectFromURLSearchParams","params","forEach","_","obj","getAll","key","object","URLSearchParams","Object","entries","filter","toString","createCodeChallengeAndVerifier","method","map","verifier","challenge","textEncoder","buffer","getCryptoSubtle","sha256","verifyIdToken","nonce","client_id","jwtVerify","id_token","createRemoteJWKSet","URL","jwks_uri","audience","payload","encoding","decodeState","v","JSON","decodeURIComponent","encodeState","state","encodeURIComponent","stringify","fromBase64","stringFromBuffer","objectFromEntries","_step","fn","timeout","factor","retries","err","n","setTimeout","ApiError","code","description","uri","fromResponse","response","error_description","error_uri","_excluded","Api","options","buildAuthorizeUrl","request","_buildUrl","buildLogoutUrl","parseAuthorizeResponseFromFragment","_validateResponse","substring","parseAuthorizeResponseFromQuery","url","searchParams","authorizeWithPopup","config","t","popup","open","screenX","innerWidth","c","timeoutId","recievedMessage","clearInterval","close","reject","PopupTimeoutError","setInterval","redirectUrl","closed","intervalId","clearTimeout","PopupClosedError","href","redirect_uri","error","hash","authorizeWithDevice","getToken","this","_buildRequest","_fetchJSON","_this4$_buildRequest","introspect","_this$_buildRequest","init","revoke","userinfo","headers","Authorization","access_token","jwks","getTokenWithAuthorizationCode","getTokenWithRefreshToken","getTokenWithDeviceCode","getTokenWithPassword","getTokenWithSAML","getTokenWithClientCredentials","_i","k","_Object$entries$_i","urlObject","search","client_secret","client_auth_method","headersInit","Headers","value","set","body","undefined","input","Accept","fetch","json","ok","status","statusText","ClientStore","client","get","mustExist","deleteAfter","_ref$deleteAfter","getStore","entry","then","expiresAt","now","setAuthorizeRequest","getAuthorizeRequest","setLogoutRequest","getLogoutRequest","setVerifier","getVerifier","setOpenIdConfiguration","username","getOpenIdConfiguration","setAuthorization","authorization","_this14","_getAuthorizationKey","authorizationOptions","expiresIn","clientID","idToken","aud","resource","scope","sub","cacheOptions","setDefaultUsername","deleteAuthorization","_this16","_getUsername","fallbackUsername","getAuthorization","_this18","_get2","_objectToKey2","util","_this20","fallbackLoginOptions","StorageStore","storage","getItem","parse","_proto","removeItem","Client","_clientStore","api","fallbackIssuer","fallbackLogoutOptions","issuerResolver","resolution","ui","store","storeOptions","uiOptions","DomUI","storeType","issuer","getDefaultUsername","localStorage","setItem","clientSecret","clientAuthMethod","maxAge","prompt","redirectUri","responseMode","rpInitiatedLogout","postLogoutRedirectUri","webfingerResolver","DefaultWebFingerResolver","ipfsResolver","DefaultIPFSResolver","createIpfsUrl","defaultCreateUrl","domainResolver","records","domain","keys","self","ResolutionError","ResolutionErrorCode","UnspecifiedResolver","sessionStorage","_createAuthorizeRequestBuilder","loginOptions","authorization_endpoint","code_challenge","login_hint","max_age","code_challenge_method","response_type","buildAuthorizeRequest","builder","_open2","closeOnFinish","defaultValue","submit","loginWithPopup","_this5","verifyAuthorizeResponse","_wasThrown","login","location","_temp","beforeRedirect","loginCallback","_options$url","response_mode","_this8$verifyAuthoriz","openidConfiguration","token_endpoint","grant_type","code_verifier","accessToken","Date","tokenResponse","expires_in","resolve","_this13","_exit2","user","claims","_this17","claim","userinfo_endpoint","_step2","buildLogoutRequest","_this19","end_session_endpoint","id_token_hint","post_logout_redirect_uri","logout","_objectWithoutPropertiesLoose","logoutOptions","_extends","logoutCallback","verifyLogoutResponse","createURL","cid","path","startsWith","password","port","protocol","hostname","DefaultIssuerResolver","includes","_jrd$links","links","find","rel","link","pact","observer","webfingerKey","subject","webfingerRecord","Host","host","_this2","onRejected","_settle","callback","MemoryDomainResolver","Map","reduce","a","has","MemoryWebFingerResolver","document","jrd","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","css","_templateObject8","_templateObject10","_templateObject11","_templateObject12","_templateObject13","keyframes","_templateObject15","getContainer","_closer","id","learnMoreLink","getADomainLink","_this$options$contain","container","getDocument","getInnerHTML","overlay","header","logo","innerCircle","middleCircle","outerCircle","title","content","alert","hidden","footer","element","setError","errorElement","innerText","classList","remove","buttonElement","add","setLoading","isLoading","loading","setAttribute","innerHTML","loadingStyles","removeAttribute","_this2$options","className","existingElement","getElementById","createElement","parentElement","appendChild","inputElement","formElement","closeElement","handleKeydown","shouldClose","addEventListener","oninput","toLowerCase","onsubmit","preventDefault","nameRegex","test","onclick","removeEventListener","removeChild","StyleSheet","_insertTag","tag","before","tags","insertionPoint","nextSibling","prepend","firstChild","insertBefore","push","isSpeedy","speedy","ctr","prototype","hydrate","nodes","insert","rule","createTextNode","createStyleElement","sheet","i","styleSheets","ownerNode","sheetForTag","insertRule","cssRules","process","flush","parentNode","identifierWithPointTracking","begin","points","index","previous","character","peek","token","next","slice","position","getRules","dealloc","parsed","delimit","toRules","alloc","fixedElements","WeakMap","compat","type","parent","isImplicitRule","column","line","props","charCodeAt","rules","parentRules","j","removeLabel","defaultStylisPlugins","prefixer","createCache","ssrStyles","querySelectorAll","call","node","getAttribute","indexOf","head","stylisPlugins","_insert","inserted","nodesToHydrate","attrib","omnipresentPlugins","currentSheet","finalizingPlugins","rulesheet","serializer","middleware","concat","selector","serialized","shouldCache","styles","serialize","compile","cache","registered","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","processStyleName","memoize","styleName","processStyleValue","match","p1","p2","cursor","unitless","handleInterpolation","mergedProps","interpolation","__emotion_styles","anim","string","isArray","_key","interpolated","createStringFromObject","previousCursor","cached","labelPattern","serializeStyles","args","stringMode","strings","raw","lastIndex","identifierName","exec","hashString","getRegisteredStyles","registeredStyles","classNames","rawClassName","insertStyles","isStringTag","registerStyles","current","insertWithoutScoping","merge","classnames","cls","arg","toAdd","createEmotion","_len","arguments","cx","_len4","_key4","injectGlobal","_len3","_key3","_len2","_key2","animation","ids","bind","_createEmotion"],"mappings":"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","file":"static/js/14.8df6888f.chunk.js","sourcesContent":["export default function createError(name: string, message: string) {\n  return class extends Error {\n    name = name\n    constructor() {\n      super(message)\n    }\n  }\n}\n","import createError from './createError'\n\nexport const PopupTimeoutError = createError(\n  'PopupTimeoutError',\n  'The popup has timed out.',\n)\n\nexport const PopupClosedError = createError(\n  'PopupClosedError',\n  'The popup was closed.',\n)\n","const stringFromBuffer = (buf: ArrayBuffer): string =>\n  String.fromCharCode.apply(null, Array.from(new Uint8Array(buf)))\n\nexport default stringFromBuffer\n","const textEncoder = new TextEncoder()\n\nexport default textEncoder\n","import window from 'global'\n\nconst getWindow: () => Window & typeof globalThis = () => window\n\nexport default getWindow\n","import getWindow from '../getWindow'\n\nconst toBase64 = (str: string) => getWindow().btoa(str)\n\nexport default toBase64\n","import toBase64 from './toBase64'\n\nconst toUrlEncodedBase64 = (str: string) => {\n  return toBase64(str)\n    .replace(/=+$/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n}\n\nexport default toUrlEncodedBase64\n","import getWindow from '../getWindow'\n\n//ie 11.x uses msCrypto\nconst getCrypto = () =>\n  (getWindow().crypto ?? (getWindow() as any).msCrypto) as Crypto\n\nexport default getCrypto\n","import getCrypto from './getCrypto'\n\nconst getRandomBytes = (length: number): Uint8Array =>\n  getCrypto().getRandomValues(new Uint8Array(length))\n\nexport default getRandomBytes\n","import getCrypto from './getCrypto'\n\n//safari 10.x uses webkitSubtle\nconst getCryptoSubtle = () =>\n  getCrypto().subtle ?? (getCrypto() as any).webkitSubtle\n\nexport default getCryptoSubtle\n","import getWindow from '../getWindow'\nimport getCryptoSubtle from './getCryptoSubtle'\n\nconst sha256 = async (buf: ArrayBuffer): Promise<ArrayBuffer> => {\n  const digestOp: any = getCryptoSubtle().digest({name: 'SHA-256'}, buf)\n\n  // This is for legacy IE Hashing\n  if ((getWindow() as any).msCrypto) {\n    return new Promise((res, rej) => {\n      digestOp.oncomplete = (e: any) => res(e.target.result)\n      digestOp.onerror = (e: ErrorEvent) => rej(e.error)\n      digestOp.onabort = () => rej('The digest operation was aborted')\n    })\n  }\n\n  return await digestOp\n}\n\nexport default sha256\n","import type {CodeChallengeMethod} from '../../types'\nimport stringFromBuffer from '../encoding/stringFromBuffer'\nimport textEncoder from '../encoding/textEncoder'\nimport toUrlEncodedBase64 from '../encoding/toUrlEncodedBase64'\nimport getRandomBytes from './getRandomBytes'\nimport sha256 from './sha256'\n\nconst pkceMask =\n  '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.'\n\nconst createCodeVerifier = (length: number) => {\n  return Array.from(getRandomBytes(length))\n    .map(v => pkceMask[v % pkceMask.length])\n    .join('')\n}\n\nconst createCodeChallengeAndVerifier = async (\n  length = 43,\n  method: CodeChallengeMethod = 'S256',\n): Promise<{verifier: string; challenge: string}> => {\n  const verifier = createCodeVerifier(length)\n\n  switch (method) {\n    case 'plain':\n      return {verifier, challenge: verifier}\n    case 'S256':\n      return {\n        verifier,\n        challenge: toUrlEncodedBase64(\n          stringFromBuffer(await sha256(textEncoder.encode(verifier).buffer)),\n        ),\n      }\n    default:\n      throw new Error('bad challenge method')\n  }\n}\n\nexport default createCodeChallengeAndVerifier\n","import getWindow from '../getWindow'\n\nconst fromBase64 = (str: string): string => getWindow().atob(str)\n\nexport default fromBase64\n","const textDecoder = new TextDecoder()\n\nexport default textDecoder\n","export default function uniqueElementsFromArray<T>(arr: T[]): T[] {\n  return Array.from(new Set(arr))\n}\n","import uniqueElementsFromArray from './uniqueElementsFromArray'\n\nconst getSortedScope = (scope: string) =>\n  uniqueElementsFromArray(scope.trim().split(/\\s+/)).sort().join(' ')\n\nexport default getSortedScope\n","export default function objectFromURLSearchParams(\n  params: URLSearchParams,\n): Record<string, string | string[]> {\n  const obj = {}\n\n  params.forEach((_, key) => {\n    if (params.getAll(key).length > 1) {\n      obj[key] = params.getAll(key)\n    } else {\n      obj[key] = params.get(key)\n    }\n  })\n\n  return obj\n}\n","export default function objectToKey(object: Record<PropertyKey, any>): string {\n  const params = new URLSearchParams(\n    [...Object.entries(object)].filter(([k, v]) => k != null && v != null),\n  )\n  params.sort()\n  return params.toString()\n}\n","import createCodeChallengeAndVerifier from './crypto/createCodeChallengeAndVerifier'\nimport getCrypto from './crypto/getCrypto'\nimport getCryptoSubtle from './crypto/getCryptoSubtle'\nimport getRandomBytes from './crypto/getRandomBytes'\nimport sha256 from './crypto/sha256'\nimport verifyIdToken from './crypto/verifyIdToken'\nimport decodeState from './encoding/decodeState'\nimport encodeState from './encoding/encodeState'\nimport fromBase64 from './encoding/fromBase64'\nimport stringFromBuffer from './encoding/stringFromBuffer'\nimport textDecoder from './encoding/textDecoder'\nimport textEncoder from './encoding/textEncoder'\nimport toBase64 from './encoding/toBase64'\nimport toUrlEncodedBase64 from './encoding/toUrlEncodedBase64'\n\nconst crypto = {\n  createCodeChallengeAndVerifier,\n  getCrypto,\n  getCryptoSubtle,\n  getRandomBytes,\n  sha256,\n  verifyIdToken,\n}\n\nconst encoding = {\n  decodeState,\n  encodeState,\n  fromBase64,\n  textDecoder,\n  textEncoder,\n  toBase64,\n  toUrlEncodedBase64,\n  stringFromBuffer,\n}\n\nexport {default as getSortedScope} from './getSortedScope'\nexport {default as getWindow} from './getWindow'\nexport {default as objectFromEntries} from './objectFromEntries'\nexport {default as objectFromURLSearchParams} from './objectFromURLSearchParams'\nexport {default as objectToKey} from './objectToKey'\nexport {default as retry} from './retry'\nexport {default as uniqueElementsFromArray} from './uniqueElementsFromArray'\nexport {crypto, encoding}\n","import {IdToken} from '@uauth/common'\nimport {jwtVerify, createRemoteJWKSet} from 'jose'\n\nconst verifyIdToken = async (\n  jwks_uri: string,\n  id_token: string,\n  nonce: string,\n  client_id: string,\n) => {\n  const {payload} = await jwtVerify(\n    id_token,\n    createRemoteJWKSet(new URL(jwks_uri)),\n    {audience: client_id},\n  )\n\n  const idToken: IdToken = payload as any\n\n  idToken.__raw = id_token\n\n  if (nonce !== idToken.nonce) {\n    throw new Error(\"nonces don't match\")\n  }\n\n  return idToken\n}\n\nexport default verifyIdToken\n","import fromBase64 from './fromBase64'\n\nconst decodeState = <T>(state: string): T => {\n  const [, v, ...b] = state.split('.')\n\n  if (b.length > 0) {\n    throw new Error('failed to decode state')\n  }\n\n  return v?.length > 0\n    ? JSON.parse(decodeURIComponent(/* unescape */ fromBase64(v)))\n    : undefined\n}\n\nexport default decodeState\n","import getRandomBytes from '../crypto/getRandomBytes'\nimport stringFromBuffer from './stringFromBuffer'\nimport toUrlEncodedBase64 from './toUrlEncodedBase64'\n\nconst encodeState = <T>(state: T): string =>\n  `${toUrlEncodedBase64(stringFromBuffer(getRandomBytes(32)))}.${\n    state == null\n      ? ''\n      : toUrlEncodedBase64(\n          /* escape */ encodeURIComponent(JSON.stringify(state)),\n        )\n  }`\n\nexport default encodeState\n","export default function objectFromEntries<T = any>(\n  entries: Iterable<readonly [PropertyKey, T]>,\n): Record<PropertyKey, T> {\n  const object: Record<PropertyKey, T> = {}\n  for (const [k, v] of entries) {\n    object[k] = v\n  }\n  return object\n}\n","function retry<T>(\n  fn: () => Promise<T>,\n  retries = 4,\n  timeout = 250,\n  factor = 2,\n  err = null,\n): Promise<T> {\n  if (retries <= 0) {\n    return Promise.reject(err)\n  }\n\n  return fn().catch(async err => {\n    await new Promise(r => setTimeout(r, timeout))\n    return retry(fn, retries - 1, timeout * factor, factor, err)\n  })\n}\n\nexport default retry\n","import {ErrorResponse} from './types'\n\nexport default class ApiError extends Error {\n  constructor(\n    public code: string,\n    public description: string,\n    public uri?: string,\n  ) {\n    super(`${code}: ${description}${uri ? `\\nSee more at ${uri}.` : ''}`)\n  }\n\n  static fromResponse(response: ErrorResponse) {\n    return new ApiError(\n      response.error,\n      response.error_description,\n      response.error_uri,\n    )\n  }\n}\n","import {PopupClosedError, PopupTimeoutError} from '../errors/errors'\nimport {UserInfo} from '../types'\nimport {objectFromURLSearchParams} from '../util'\nimport toBase64 from '../util/encoding/toBase64'\nimport ApiError from './ApiError'\nimport {\n  ApiOptions,\n  AuthorizeRequest,\n  AuthorizeResponse,\n  AuthorizeWithDeviceRequest,\n  AuthorizeWithDeviceResponse,\n  BaseRequest,\n  IntrospectRequest,\n  IntrospectResponse,\n  JWKSRequest,\n  JWKSResponse,\n  LogoutRequest,\n  PopupConfig,\n  RevokeRequest,\n  TokenRequest,\n  TokenResponse,\n  TokenWithAuthorizationCodeRequest,\n  TokenWithClientCredentialsRequest,\n  TokenWithDeviceCodeRequest,\n  TokenWithPasswordRequest,\n  TokenWithRefreshTokenRequest,\n  TokenWithSAMLRequest,\n  UserInfoRequest,\n} from './types'\n\nexport default class Api {\n  static Error = ApiError\n\n  constructor(public options: ApiOptions) {}\n\n  buildAuthorizeUrl(request: AuthorizeRequest): string {\n    return this._buildUrl(request)\n  }\n\n  buildLogoutUrl(request: LogoutRequest): string {\n    return this._buildUrl(request)\n  }\n\n  parseAuthorizeResponseFromFragment(url: string): AuthorizeResponse {\n    return this._validateResponse(\n      objectFromURLSearchParams(\n        new URLSearchParams(new URL(url).hash.substring(1)),\n      ),\n    )\n  }\n\n  parseAuthorizeResponseFromQuery(url: string): AuthorizeResponse {\n    return this._validateResponse(\n      objectFromURLSearchParams(new URL(url).searchParams),\n    )\n  }\n\n  async authorizeWithPopup(\n    request: AuthorizeRequest,\n    config: PopupConfig = {},\n  ): Promise<AuthorizeResponse> {\n    if (!window) {\n      throw new Error('no window in options')\n    }\n\n    const url = this.buildAuthorizeUrl(request)\n\n    let popup: Window | undefined | null = config.popup\n    const timeout: number = config.timeout ?? 3600000\n\n    if (!popup) {\n      popup = window.open(\n        url,\n        'uauth:authorize:popup',\n        `left=${window.screenX + (window.innerWidth - 400) / 2},top=${\n          window.screenY + (window.innerHeight - 600) / 2\n        },width=400,height=600,resizable,scrollbars=yes,status=1`,\n      )\n\n      if (!popup) {\n        throw new Error('popup failed to be constructed')\n      }\n    } else {\n      popup.location.href = url\n    }\n\n    let recievedMessage = false\n    const response: AuthorizeResponse = await new Promise((resolve, reject) => {\n      const timeoutId = setTimeout(() => {\n        if (!recievedMessage) {\n          clearInterval(intervalId)\n          popup!.close()\n          reject(new PopupTimeoutError())\n        }\n      }, timeout)\n\n      const intervalId = setInterval(() => {\n        // Check if popup is closed\n        if (!recievedMessage && popup?.closed) {\n          clearInterval(intervalId)\n          clearTimeout(timeoutId)\n          reject(new PopupClosedError())\n        }\n\n        // Check if popup doesn't violate the \"Same-Origin\" policy and has a valid url\n        let href: string\n        let url: URL\n        let redirectUrl: URL\n        try {\n          href = popup!.location.href\n          url = new URL(href)\n          redirectUrl = new URL(request.redirect_uri)\n        } catch (error) {\n          return // Exit if not\n        }\n\n        // Check to see that the redirect was correct\n        url.hash = ''\n        if (url.href === redirectUrl.href) {\n          recievedMessage = true\n\n          clearInterval(intervalId)\n          clearTimeout(timeoutId)\n          popup!.close()\n\n          try {\n            resolve(this.parseAuthorizeResponseFromFragment(href))\n          } catch (error) {\n            reject(error)\n          }\n        }\n      }, 10)\n    })\n\n    return response\n  }\n\n  async authorizeWithDevice(\n    request: AuthorizeWithDeviceRequest,\n  ): Promise<AuthorizeWithDeviceResponse> {\n    return {} as any\n  }\n\n  async getToken(request: TokenRequest): Promise<TokenResponse> {\n    const [input, init] = this._buildRequest(request, {method: 'POST'})\n    return this._fetchJSON(input, init)\n  }\n\n  introspect(request: IntrospectRequest): Promise<IntrospectResponse> {\n    const [input, init] = this._buildRequest(request, {method: 'POST'})\n    return this._fetchJSON(input, init)\n  }\n\n  async revoke(request: RevokeRequest): Promise<void> {\n    const [input, init] = this._buildRequest(request, {method: 'POST'})\n    await this._fetchJSON(input, init)\n  }\n\n  userinfo(request: UserInfoRequest): Promise<UserInfo> {\n    const [input, init] = this._buildRequest(request, {\n      method: 'GET',\n      headers: {Authorization: `Basic ${request.access_token}`},\n    })\n    return this._fetchJSON(input, init)\n  }\n\n  jwks(request: JWKSRequest): Promise<JWKSResponse> {\n    const [input, init] = this._buildRequest(request, {method: 'GET'})\n    return this._fetchJSON(input, init)\n  }\n\n  getTokenWithAuthorizationCode(\n    request: TokenWithAuthorizationCodeRequest,\n  ): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  getTokenWithRefreshToken(\n    request: TokenWithRefreshTokenRequest,\n  ): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  getTokenWithDeviceCode(\n    request: TokenWithDeviceCodeRequest,\n  ): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  getTokenWithPassword(\n    request: TokenWithPasswordRequest,\n  ): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  getTokenWithSAML(request: TokenWithSAMLRequest): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  getTokenWithClientCredentials(\n    request: TokenWithClientCredentialsRequest,\n  ): Promise<TokenResponse> {\n    return this.getToken(request)\n  }\n\n  private _buildUrl(request: BaseRequest): string {\n    const {url, ...searchParams} = request\n\n    const urlObject = new URL(url)\n\n    const params = new URLSearchParams()\n\n    for (const [k, v] of Object.entries(searchParams)) {\n      if (k != null && v != null) {\n        params.append(k, v)\n      }\n    }\n\n    urlObject.search = params.toString()\n    return urlObject.toString()\n  }\n\n  private _buildRequest(\n    request: BaseRequest,\n    options: {method: 'GET' | 'POST'; headers?: HeadersInit},\n  ): [RequestInfo, RequestInit] {\n    const {url, client_id, client_secret, client_auth_method, ...rest} = request\n    const {headers: headersInit, method} = options\n\n    const headers = new Headers(this.options.headers ?? [])\n\n    new Headers(headersInit ?? []).forEach((value, key) => {\n      headers.set(key, value)\n    })\n\n    if (options.method === 'POST') {\n      headers.set('Content-Type', 'application/x-www-form-urlencoded')\n    }\n\n    const body: Record<string, any> = {\n      client_id,\n      ...rest,\n    }\n\n    switch (client_auth_method) {\n      case 'client_secret_basic':\n        // throw new Error('only client_secret_post supported')\n        if (client_secret == null) {\n          throw new Error('Client secret not present!')\n        }\n\n        headers.set(\n          'Authorization',\n          `Basic ${toBase64(`${client_id}:${client_secret}`)}`,\n        )\n\n        break\n      case 'client_secret_post':\n        if (client_secret == null) {\n          throw new Error('Client secret not present!')\n        }\n\n        body.client_secret = client_secret\n\n        break\n      case 'none':\n      case undefined:\n      case null:\n        break\n      default:\n        throw new Error('Bad client_auth_method')\n    }\n\n    return [\n      url,\n      {\n        method,\n        headers,\n        body:\n          method === 'POST'\n            ? new URLSearchParams(Object.entries(body))\n            : undefined,\n      },\n    ]\n  }\n\n  private _validateResponse(response: any) {\n    if (response.error) {\n      throw Api.Error.fromResponse(response)\n    }\n\n    return response\n  }\n\n  private async _fetchJSON(\n    input: RequestInfo,\n    init: RequestInit,\n  ): Promise<any> {\n    if (init.headers) {\n      const headers = new Headers(init.headers)\n      headers.set('Accept', 'application/json')\n      init.headers = headers\n    } else {\n      init.headers = {Accept: 'application/json'}\n    }\n\n    const response = await window?.fetch(input, init)\n\n    const json = await response.json()\n    this._validateResponse(json)\n\n    if (!response.ok) {\n      throw new Error(\n        `${response.status} ${response.statusText}: ${JSON.stringify(json)}`,\n      )\n    }\n\n    return json\n  }\n}\n","import {AuthorizeRequest, LogoutRequest} from './api'\nimport type Client from './Client'\nimport {Authorization, AuthorizationOptions} from './types'\nimport * as util from './util'\n\nclass ClientStore {\n  constructor(public client: Client) {}\n\n  private async get<T>(\n    key: string,\n    {mustExist = false, deleteAfter = false} = {},\n  ): Promise<T | undefined> {\n    const entry = await this.client.getStore().get(key)\n    if (entry == null) {\n      if (mustExist) {\n        throw new Error(`${key} does not exist in store`)\n      }\n      return\n    }\n\n    const {value, expiresAt} = entry\n    if (expiresAt !== 0 && expiresAt < Date.now()) {\n      await this.client.getStore().delete(key)\n      if (mustExist) {\n        throw new Error(`${key} does not exist in store`)\n      }\n      return\n    }\n\n    if (deleteAfter) {\n      await this.client.getStore().delete(key)\n    }\n\n    return value\n  }\n\n  private async set<T>(key: string, value: any, timeout = 0) {\n    await this.client.getStore().set(key, {\n      expiresAt: timeout === 0 ? 0 : Date.now() + timeout,\n      value,\n    })\n  }\n\n  async setAuthorizeRequest(request: AuthorizeRequest): Promise<void> {\n    await this.set('request', request, 300_000 /* 5 minutes */)\n  }\n  getAuthorizeRequest(): Promise<AuthorizeRequest> {\n    return this.get<AuthorizeRequest>('request', {\n      mustExist: true,\n      deleteAfter: true,\n    }) as Promise<AuthorizeRequest>\n  }\n\n  async setLogoutRequest(request: LogoutRequest): Promise<void> {\n    await this.set('logout-request', request, 300_000 /* 5 minutes */)\n  }\n  getLogoutRequest(): Promise<LogoutRequest> {\n    return this.get<LogoutRequest>('logout-request', {\n      mustExist: true,\n      deleteAfter: true,\n    }) as Promise<LogoutRequest>\n  }\n\n  async setVerifier(challenge: string, verifier: string): Promise<void> {\n    await this.set(`verifier:${challenge}`, verifier, 300_000 /* 5 minutes */)\n  }\n  getVerifier(challenge: string): Promise<string> {\n    return this.get(`verifier:${challenge}`, {\n      mustExist: true,\n      deleteAfter: true,\n    }) as Promise<string>\n  }\n\n  async setOpenIdConfiguration(\n    username: string,\n    openidConfiguration: any,\n    timeout: number,\n  ): Promise<void> {\n    await this.set(\n      `openidConfiguration:${username}`,\n      openidConfiguration,\n      timeout,\n    )\n  }\n  getOpenIdConfiguration(username: string): Promise<any> {\n    return this.get(`openidConfiguration:${username}`)\n  }\n\n  async setAuthorization(authorization: Authorization): Promise<void> {\n    const authorizationOptions: AuthorizationOptions = {\n      clientID: authorization.idToken.aud,\n      resource: authorization.resource,\n      scope: authorization.scope,\n      username: authorization.idToken.sub,\n    }\n\n    const expiresIn = authorization.expiresAt - Date.now()\n\n    if (this.client.cacheOptions.setDefaultUsername) {\n      await this.client.cacheOptions.setDefaultUsername(\n        authorization.idToken.sub,\n      )\n    }\n\n    await this.set('username', authorizationOptions.username, expiresIn)\n    await this.set(\n      await this._getAuthorizationKey(authorizationOptions),\n      authorization,\n      expiresIn,\n    )\n  }\n  async deleteAuthorization(options: AuthorizationOptions): Promise<boolean> {\n    const fallbackUsername = await this.get<string>('username')\n\n    options.username = await this._getUsername(\n      options.username,\n      fallbackUsername,\n    )\n\n    if (options.username === fallbackUsername) {\n      await this.client.getStore().delete('username')\n    }\n\n    return this.client\n      .getStore()\n      .delete(await this._getAuthorizationKey(options))\n  }\n  async getAuthorization(\n    options: AuthorizationOptions,\n  ): Promise<Authorization> {\n    return this.get(await this._getAuthorizationKey(options), {\n      mustExist: true,\n    }) as Promise<Authorization>\n  }\n\n  private async _getAuthorizationKey(\n    options: AuthorizationOptions,\n  ): Promise<string> {\n    return `authorization?${util.objectToKey({\n      username: await this._getUsername(\n        options.username,\n        await this.get('username'),\n      ),\n      clientID: options.clientID ?? this.client.fallbackLoginOptions.clientID,\n      scope: util.getSortedScope(\n        options.scope ?? this.client.fallbackLoginOptions.scope,\n      ),\n      resource: options.resource ?? this.client.fallbackLoginOptions.resource,\n    })}`\n  }\n\n  private async _getUsername(username?: string, fallbackUsername?: string) {\n    if (username == null && fallbackUsername == null) {\n      throw new Error('no username given')\n    }\n\n    return username ?? fallbackUsername\n  }\n}\n\nexport default ClientStore\n","import {Store} from './types'\n\nexport default class StorageStore implements Store {\n  constructor(public storage: Storage) {}\n\n  get(key: string): string | null {\n    const value = this.storage.getItem(key)\n\n    if (value != null) {\n      return JSON.parse(value)\n    }\n\n    return null\n  }\n\n  delete(key: string): boolean {\n    this.storage.removeItem(key)\n    return true\n  }\n\n  set(key: string, value): this {\n    this.storage.setItem(key, JSON.stringify(value))\n    return this\n  }\n}\n","import AbstractUI from '@uauth/abstract-ui'\nimport {\n  DefaultIPFSResolver,\n  DefaultIssuerResolver,\n  DefaultWebFingerResolver,\n  DomainResolver,\n  IssuerResolver,\n} from '@uauth/common'\nimport DomUI from '@uauth/dom-ui'\nimport {\n  Resolution,\n  ResolutionError,\n  ResolutionErrorCode,\n} from '@unstoppabledomains/resolution'\nimport {\n  Api,\n  AuthorizeRequest,\n  AuthorizeResponse,\n  LogoutRequest,\n  LogoutResponse,\n  PopupConfig,\n  TokenResponse,\n  TokenWithAuthorizationCodeRequest,\n  UserInfoRequest,\n} from './api'\nimport ClientStore from './ClientStore'\nimport {StorageStore, Store, StoreType} from './store'\nimport {\n  Authorization,\n  AuthorizationOptions,\n  BaseLoginOptions,\n  BaseLogoutOptions,\n  CacheOptions,\n  ClientOptions,\n  FullLoginOptions,\n  LoginCallbackOptions,\n  LoginCallbackResponse,\n  LoginOptions,\n  LogoutCallbackOptions,\n  LogoutOptions,\n  UserInfo,\n  UserOptions,\n} from './types'\nimport * as util from './util'\n\nexport default class Client {\n  util = util\n  private _clientStore = new ClientStore(this)\n  api: Api\n  fallbackIssuer: string\n  fallbackLoginOptions: BaseLoginOptions\n  fallbackLogoutOptions: BaseLogoutOptions\n  cacheOptions: CacheOptions\n  issuerResolver: IssuerResolver\n  resolution: DomainResolver\n  ui: AbstractUI<AuthorizeRequest>\n\n  store?: Store\n  storeOptions: {\n    store?: Store\n    storeType: StoreType\n  }\n\n  getStore(): Store {\n    if (this.store) {\n      return this.store\n    }\n\n    if (this.storeOptions.store) {\n      this.store = this.storeOptions.store\n    } else {\n      const storeType = this.storeOptions.storeType\n      switch (storeType) {\n        case 'localstore':\n          this.store = new StorageStore(window.localStorage)\n          break\n        case 'sessionstore':\n          this.store = new StorageStore(window.sessionStorage)\n          break\n        case 'memory':\n          this.store = new Map<string, string>()\n          break\n        default:\n          throw new Error('Bad storeType provided')\n      }\n    }\n\n    return this.store\n  }\n\n  constructor(options: ClientOptions) {\n    this.fallbackIssuer =\n      options.fallbackIssuer ?? 'https://auth.unstoppabledomains.com'\n    this.resolution = options.resolution ?? new Resolution()\n\n    if (options.ui) {\n      this.ui = options.ui\n    } else {\n      if (options.uiOptions) {\n        this.ui = new DomUI(options.uiOptions)\n      } else {\n        this.ui = new DomUI()\n      }\n    }\n\n    this.storeOptions = {\n      store: options.store,\n      storeType: options.storeType ?? 'localstore',\n    }\n\n    this.cacheOptions = {\n      issuer: false,\n      userinfo: true,\n      getDefaultUsername: () =>\n        window.localStorage.getItem('uauth-default-username') ?? '',\n      ...(options.cacheOptions ?? {}),\n    }\n\n    if (\n      !options.cacheOptions?.getDefaultUsername &&\n      !options.cacheOptions?.setDefaultUsername\n    ) {\n      this.cacheOptions.setDefaultUsername = (username: string) => {\n        window.localStorage.setItem('uauth-default-username', username)\n      }\n    }\n\n    this.api = new Api({\n      headers: {},\n    })\n\n    this.fallbackLoginOptions = {\n      clientID: options.clientID,\n      clientSecret: options.clientSecret,\n      clientAuthMethod:\n        options.clientAuthMethod ??\n        (options.clientSecret ? 'client_secret_post' : 'none'),\n      maxAge: options.maxAge ?? 300000,\n      prompt: options.prompt ?? 'login',\n      resource: options.resource,\n      redirectUri: options.redirectUri,\n      responseMode: options.responseMode ?? 'fragment',\n      scope: options.scope ?? 'openid wallet',\n    }\n\n    this.fallbackLogoutOptions = {\n      rpInitiatedLogout:\n        options.rpInitiatedLogout ??\n        typeof options.postLogoutRedirectUri === 'string',\n      postLogoutRedirectUri: options.postLogoutRedirectUri,\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this\n    this.issuerResolver = new DefaultIssuerResolver({\n      webfingerResolver: new DefaultWebFingerResolver({\n        ipfsResolver: new DefaultIPFSResolver((...args) =>\n          (options.createIpfsUrl || DefaultIPFSResolver.defaultCreateUrl)(\n            ...args,\n          ),\n        ),\n        domainResolver: {\n          async records(\n            domain: string,\n            keys: string[],\n          ): Promise<Record<string, string>> {\n            try {\n              const records = await self.resolution.records(domain, keys)\n              return records\n            } catch (error) {\n              if (\n                error instanceof ResolutionError &&\n                error.code === ResolutionErrorCode.UnspecifiedResolver\n              ) {\n                return {}\n              }\n              throw error\n            }\n          },\n        },\n      }),\n    })\n  }\n\n  private _createAuthorizeRequestBuilder(\n    options: Partial<LoginOptions>,\n  ): (username: string) => Promise<AuthorizeRequest> {\n    // TODO: Ensure nothing is missing\n    const loginOptions: FullLoginOptions = {\n      ...this.fallbackLoginOptions,\n      ...options,\n    } as FullLoginOptions\n\n    const builder = async (username: string): Promise<AuthorizeRequest> => {\n      await new Promise(r => setTimeout(r, 2000))\n      const openidConfiguration = await this.getOpenIdConfiguration(username)\n\n      const {verifier, challenge} =\n        await util.crypto.createCodeChallengeAndVerifier(43, 'S256')\n\n      const nonce = util.encoding.toBase64(\n        util.encoding.stringFromBuffer(util.crypto.getRandomBytes(32)),\n\n        /* util.encoding.textDecoder.decode */\n      )\n\n      const state = util.encoding.encodeState(loginOptions.state)\n\n      const request: AuthorizeRequest = {\n        // Generated options\n        url: openidConfiguration.authorization_endpoint,\n        code_challenge: challenge,\n        nonce,\n        state,\n\n        // Parameterized options\n        client_id: loginOptions.clientID,\n        client_secret: loginOptions.clientSecret,\n        client_auth_method: loginOptions.clientAuthMethod,\n        login_hint: username,\n        max_age: loginOptions.maxAge,\n        prompt: loginOptions.prompt,\n        resource: loginOptions.resource,\n        redirect_uri: loginOptions.redirectUri,\n        response_mode: loginOptions.responseMode,\n        scope: loginOptions.scope,\n\n        // Constant options\n        code_challenge_method: 'S256',\n        response_type: 'code',\n      }\n\n      await this._clientStore.setAuthorizeRequest(request)\n      await this._clientStore.setVerifier(challenge, verifier)\n\n      return request\n    }\n\n    return builder\n  }\n\n  async buildAuthorizeRequest(\n    options: Partial<LoginOptions>,\n  ): Promise<AuthorizeRequest> {\n    const builder = this._createAuthorizeRequestBuilder(options)\n\n    if (options.username) {\n      return builder(options.username)\n    }\n\n    return this.ui.open({\n      closeOnFinish: false,\n      defaultValue: await this.cacheOptions.getDefaultUsername(),\n      submit: builder,\n    })\n  }\n\n  async loginWithPopup(\n    options: Partial<Omit<LoginOptions, 'responseMode'>> = {},\n    config?: PopupConfig,\n  ): Promise<Authorization> {\n    try {\n      ;(options as Partial<LoginOptions>).responseMode = 'fragment'\n      const request = await this.buildAuthorizeRequest(options)\n      const response = await this.api.authorizeWithPopup(request, config)\n      const authorization = await this.verifyAuthorizeResponse(\n        request,\n        response,\n      )\n\n      return authorization\n    } finally {\n      this.ui.close()\n    }\n  }\n\n  async login(options: Partial<LoginOptions> = {}): Promise<void> {\n    const request: AuthorizeRequest = await this.buildAuthorizeRequest(options)\n\n    const url = this.api.buildAuthorizeUrl(request)\n\n    if (typeof options.beforeRedirect === 'function') {\n      await options.beforeRedirect(url)\n    }\n\n    window.location.href = url\n  }\n\n  async loginCallback<T>(\n    options?: Partial<LoginCallbackOptions>,\n  ): Promise<LoginCallbackResponse<T>> {\n    const url = options?.url ?? window.location.href\n\n    const request: AuthorizeRequest =\n      await this._clientStore.getAuthorizeRequest()\n\n    let response: AuthorizeResponse\n    if (request.response_mode === 'fragment') {\n      response = this.api.parseAuthorizeResponseFromFragment(url)\n    } else if (request.response_mode === 'query') {\n      response = this.api.parseAuthorizeResponseFromQuery(url)\n    } else {\n      throw new Error('Unsupported response_mode')\n    }\n\n    return {\n      authorization: await this.verifyAuthorizeResponse(request, response),\n      state: util.encoding.decodeState<T>(request.state),\n    }\n  }\n\n  async verifyAuthorizeResponse(\n    request: AuthorizeRequest,\n    response: AuthorizeResponse,\n  ): Promise<Authorization> {\n    if (request.state !== response.state) {\n      throw new Error(\"states don't match\")\n    }\n\n    const openidConfiguration = await this.getOpenIdConfiguration(\n      request.login_hint,\n    )\n\n    const tokenRequest: TokenWithAuthorizationCodeRequest = {\n      url: openidConfiguration.token_endpoint,\n      client_id: request.client_id,\n      client_secret: request.client_secret,\n      client_auth_method: request.client_auth_method,\n      grant_type: 'authorization_code',\n      code: response.code,\n      code_verifier: await this._clientStore.getVerifier(\n        request.code_challenge,\n      ),\n      redirect_uri: request.redirect_uri,\n    }\n\n    const tokenResponse: TokenResponse =\n      await this.api.getTokenWithAuthorizationCode(tokenRequest)\n\n    const idToken = await util.crypto.verifyIdToken(\n      openidConfiguration.jwks_uri,\n      tokenResponse.id_token!,\n      request.nonce,\n      request.client_id,\n    )\n\n    const authorization: Authorization = {\n      accessToken: tokenResponse.access_token,\n      // TODO: The server isn't returning the scope along with the callback and\n      // I havn't found the oidc docs to figure out if this is a bug.\n      expiresAt: Date.now() + tokenResponse.expires_in * 1000,\n      idToken,\n      scope: util.getSortedScope(request.scope),\n      resource: request.resource,\n    }\n\n    await this._clientStore.setAuthorization(authorization)\n\n    return authorization\n  }\n\n  async getOpenIdConfiguration(username: string): Promise<any> {\n    if (this.cacheOptions.issuer) {\n      const openidConfiguration =\n        await this._clientStore.getOpenIdConfiguration(username)\n      if (openidConfiguration) {\n        return openidConfiguration\n      }\n    }\n\n    const openidConfiguration = await this.issuerResolver.resolve(\n      username,\n      this.fallbackIssuer,\n    )\n\n    await this._clientStore.setOpenIdConfiguration(\n      username,\n      openidConfiguration,\n      typeof this.cacheOptions.issuer === 'number'\n        ? this.cacheOptions.issuer\n        : 3600_000,\n    )\n\n    return openidConfiguration\n  }\n\n  async authorization(\n    options: AuthorizationOptions = {},\n  ): Promise<Authorization> {\n    return this._clientStore.getAuthorization(options)\n  }\n\n  async user(options: UserOptions = {}): Promise<UserInfo> {\n    const claims = options.claims ?? [\n      'name',\n      'given_name',\n      'family_name',\n      'middle_name',\n      'nickname',\n      'preferred_username',\n      'profile',\n      'picture',\n      'website',\n      'email',\n      'email_verified',\n      'gender',\n      'birthdate',\n      'zoneinfo',\n      'locale',\n      'phone_number',\n      'phone_number_verified',\n      'address',\n      'updated_at',\n      'wallet_address',\n      'wallet_type_hint',\n      'eip4361_message',\n      'eip4361_signature',\n    ]\n\n    const authorization = await this.authorization(options)\n\n    const userinfo: UserInfo = {\n      sub: authorization.idToken.sub,\n    }\n\n    // If we should only read from cache.\n    if (this.cacheOptions.userinfo) {\n      for (const claim of claims) {\n        if (authorization.idToken[claim]) {\n          userinfo[claim] = authorization.idToken[claim]\n        }\n      }\n\n      return userinfo\n    }\n\n    const openidConfiguration = await this.getOpenIdConfiguration(\n      authorization.idToken.sub,\n    )\n\n    const request: UserInfoRequest = {\n      client_id: this.fallbackLoginOptions.clientID,\n      client_secret: this.fallbackLoginOptions.clientSecret,\n      client_auth_method: this.fallbackLoginOptions.clientAuthMethod,\n      access_token: authorization.accessToken,\n      url: openidConfiguration.userinfo_endpoint,\n    }\n\n    const response = await this.api.userinfo(request)\n\n    for (const claim of claims) {\n      if (response[claim]) {\n        userinfo[claim] = response[claim]\n      }\n    }\n\n    return userinfo\n  }\n\n  async buildLogoutRequest(options: LogoutOptions): Promise<LogoutRequest> {\n    const authorization = await this.authorization(options)\n\n    const openidConfiguration = await this.getOpenIdConfiguration(\n      authorization.idToken.sub,\n    )\n\n    if (openidConfiguration.end_session_endpoint == null) {\n      throw new Error('end_session_endpoint must exist')\n    }\n\n    const postLogoutRedirectUri =\n      options.postLogoutRedirectUri ??\n      this.fallbackLogoutOptions.postLogoutRedirectUri\n\n    if (postLogoutRedirectUri == null) {\n      throw new Error('postLogoutRedirectUri must be supplied')\n    }\n\n    const request: LogoutRequest = {\n      client_id: this.fallbackLoginOptions.clientID,\n      client_secret: this.fallbackLoginOptions.clientSecret,\n      client_auth_method: this.fallbackLoginOptions.clientAuthMethod,\n      url: openidConfiguration.end_session_endpoint,\n      id_token_hint: authorization.idToken.__raw,\n      post_logout_redirect_uri: postLogoutRedirectUri,\n      state: util.encoding.encodeState(options.state),\n    }\n\n    await this._clientStore.setLogoutRequest(request)\n\n    return request\n  }\n\n  async logout({\n    clientID,\n    username,\n    scope,\n    resource,\n    ...options\n  }: Partial<LogoutOptions> = {}): Promise<void> {\n    const logoutOptions: LogoutOptions = {\n      ...this.fallbackLogoutOptions,\n      ...options,\n    }\n\n    const authorizationOptions = {clientID, username, scope, resource}\n\n    if (!logoutOptions.rpInitiatedLogout) {\n      await this._clientStore.deleteAuthorization(authorizationOptions)\n      return\n    }\n\n    const request = await this.buildLogoutRequest(logoutOptions)\n\n    const url = this.api.buildLogoutUrl(request)\n\n    if (typeof logoutOptions.beforeRedirect === 'function') {\n      await logoutOptions.beforeRedirect(url)\n    }\n\n    await this._clientStore.deleteAuthorization(authorizationOptions)\n\n    window.location.href = url\n  }\n\n  async logoutCallback<T>(options: LogoutCallbackOptions = {}): Promise<T> {\n    const url = options?.url ?? window.location.href\n\n    const request: LogoutRequest = await this._clientStore.getLogoutRequest()\n\n    const response: AuthorizeResponse =\n      this.api.parseAuthorizeResponseFromQuery(url)\n\n    await this.verifyLogoutResponse(request, response)\n\n    return util.encoding.decodeState<T>(request.state)\n  }\n\n  async verifyLogoutResponse(\n    request: LogoutRequest,\n    response: LogoutResponse,\n  ): Promise<void> {\n    if (request.state !== response.state) {\n      throw new Error(\"states don't match\")\n    }\n  }\n}\n","import {IPFSResolver} from './types'\n\nexport default class DefaultIPFSResolver implements IPFSResolver {\n  static defaultCreateUrl(cid: string, path: string): string {\n    return `https://${cid}.ipns.dweb.link${path.replace(/^\\/?/, '/')}`\n  }\n\n  constructor(public createURL = DefaultIPFSResolver.defaultCreateUrl) {}\n\n  async resolve(uri: string): Promise<string> {\n    let cid: string\n    let path: string\n    let protocol: string\n\n    if (uri.startsWith('/ipfs/') || uri.startsWith('/ipns/')) {\n      protocol = uri.substring(1, 5)\n      cid = uri.substring(6).split('/')[0]\n      path = uri.substring(6 + cid.length)\n    } else {\n      const url = new URL(uri)\n\n      if (\n        url.hash !== '' ||\n        url.password !== '' ||\n        url.port !== '' ||\n        url.search !== '' ||\n        url.username !== ''\n      ) {\n        throw new Error('invalid ipfs uri')\n      }\n\n      protocol = url.protocol.substring(0, 4)\n      cid = url.hostname\n      path = url.pathname\n    }\n\n    if (protocol !== 'ipfs') {\n      throw new Error('only ipfs is supported, (not ipns)')\n    }\n\n    return fetch(this.createURL(cid, path)).then(resp =>\n      resp.ok ? resp.text() : Promise.reject(new Error('bad response')),\n    )\n  }\n}\n","import {IssuerResolver, IssuerResolverOptions} from './types'\n\nexport default class DefaultIssuerResolver implements IssuerResolver {\n  constructor(public options: IssuerResolverOptions) {}\n\n  async resolve(username: string, fallbackIssuer: string) {\n    let user = ''\n    let domain: string\n    if (username.includes('@')) {\n      ;[user, domain] = username.split('@', 1)\n    } else {\n      domain = username\n    }\n\n    const rel = 'http://openid.net/specs/connect/1.0/issuer'\n\n    const jrd = await this.options.webfingerResolver.resolve(\n      domain,\n      user,\n      rel,\n      fallbackIssuer,\n    )\n\n    const link = jrd.links?.find(v => v.rel === rel)\n    if (!link || !link.href) {\n      throw new Error('bad jrd')\n    }\n\n    const config = await fetch(\n      link.href + '/.well-known/openid-configuration',\n    ).then(resp =>\n      resp.ok\n        ? resp.json()\n        : Promise.reject(new Error('bad openid-configuration response')),\n    )\n\n    return config\n  }\n}\n","import {isJRD} from './JRD'\nimport {JRDDocument, WebFingerRecord, WebFingerResolverOptions} from './types'\n\nexport default class DefaultWebFingerResolver {\n  constructor(public options: WebFingerResolverOptions) {}\n\n  async resolve(\n    domain: string,\n    user: string,\n    rel: string,\n    fallbackIssuer: string,\n  ): Promise<JRDDocument> {\n    const webfingerKey = `webfinger.${user}.${rel}`\n\n    // console.log('domain:', domain)\n    // console.log('webfingerKey:', webfingerKey)\n\n    const records = await this.options.domainResolver.records(domain, [\n      webfingerKey,\n    ])\n\n    const resource = user ? `acct:${user}@${domain}` : `${domain}`\n\n    // console.log('record value:', records[webfingerKey])\n\n    if (!records[webfingerKey]) {\n      return {subject: resource, links: [{rel, href: fallbackIssuer}]}\n    }\n\n    const webfingerRecord: WebFingerRecord = JSON.parse(records[webfingerKey])\n\n    // console.log('webfingerRecord:', webfingerRecord)\n\n    let json\n    if (typeof webfingerRecord.host === 'string') {\n      json = await fetch(\n        '/.well-known/webfinger?' +\n          new URLSearchParams({resource, rel}).toString(),\n        {headers: {Host: webfingerRecord.host}},\n      ).then(resp =>\n        resp.ok\n          ? resp.json()\n          : Promise.reject(new Error('bad webfinger response')),\n      )\n    } else if (typeof webfingerRecord.uri === 'string') {\n      const url = new URL(webfingerRecord.uri)\n\n      switch (url.protocol) {\n        case 'http:':\n        case 'https:': {\n          json = await fetch(url.toString()).then(resp =>\n            resp.ok\n              ? resp.json()\n              : Promise.reject(new Error('bad webfinger response')),\n          )\n          break\n        }\n        case 'ipfs:': {\n          json = JSON.parse(\n            await this.options.ipfsResolver.resolve(webfingerRecord.uri),\n          )\n          break\n        }\n        case 'ipns:':\n        case 'swarm:':\n        default: {\n          throw new Error('uri scheme not supported')\n        }\n      }\n    } else if (typeof webfingerRecord.value === 'string') {\n      json = JSON.parse(webfingerRecord.value)\n    } else {\n      throw new Error('bad webfinger record')\n    }\n\n    if (!isJRD(json)) {\n      throw new Error('resolved document not jrd')\n    }\n\n    if (json.subject !== resource) {\n      throw new Error('resource invalid')\n    }\n\n    return json\n  }\n}\n","import {DomainResolver} from './types'\n\nexport default class MemoryDomainResolver implements DomainResolver {\n  private map: Map<string, Record<string, string>> = new Map()\n\n  set(domain: string, records: Record<string, string>): void {\n    if (!this.map.has(domain)) {\n      this.map.set(domain, records)\n      return\n    }\n\n    this.map.set(domain, {...this.map.get(domain), ...records})\n  }\n\n  records = async (\n    domain: string,\n    keys: string[],\n  ): Promise<Record<string, string>> => {\n    const records = this.map.get(domain)\n\n    if (keys.length === 0) {\n      throw new Error('no keys')\n    }\n\n    if (!records) {\n      return {}\n    }\n\n    return keys.reduce((a, v) => {\n      a[v] = records[v] || ''\n      return a\n    }, {} as Record<string, string>)\n  }\n}\n","import {JRDDocument, WebFingerResolver} from './types'\n\nexport default class MemoryWebFingerResolver implements WebFingerResolver {\n  map = new Map<string, JRDDocument>()\n\n  set(domain: string, user: string, rel: string, document: JRDDocument): void {\n    this.map.set(`${domain}.${user}.${rel}`, document)\n  }\n\n  async resolve(\n    domain: string,\n    user: string,\n    rel: string,\n    fallbackIssuer: string,\n  ): Promise<JRDDocument> {\n    const jrd = this.map.get(`${domain}.${user}.${rel}`)\n\n    if (!jrd) {\n      return {subject: domain, links: [{rel, href: fallbackIssuer}]}\n    }\n\n    return jrd\n  }\n}\n","import {JRDDocument, JRDLink} from './types'\n\nexport function isJRDLink(json: any): json is JRDLink {\n  return true\n}\n\nexport function isJRD(json: any): json is JRDDocument {\n  return true\n}\n","import {css, keyframes} from '@emotion/css'\n\nexport const overlay = css`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #00000080;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-y: auto;\n  z-index: 2147483647;\n  * {\n    box-sizing: border-box;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\n      Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\n  }\n`\n\nexport const container = css`\n  background-color: #ffffff;\n  border-radius: 4px;\n  overflow: hidden;\n  width: 100%;\n  max-width: 400px;\n  position: absolute;\n  @media only screen and (max-width: 416px) {\n    max-width: calc(100% - 16px);\n    height: 100%;\n    max-height: calc(100% - 16px);\n  }\n`\n\nexport const close = css`\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  padding-top: 24px;\n  padding-right: 24px;\n  padding-bottom: 16px;\n  padding-left: 16px;\n  font-size: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  max-width: 24px;\n  max-height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: black;\n  background-color: #ffffff;\n  box-shadow: 0 0 16px #ffffff;\n  border: none;\n  &:active {\n    color: #666;\n  }\n  &:before {\n    content: '\\\\2715';\n  }\n`\n\nexport const header = css`\n  padding: 16px;\n  padding-bottom: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`\n\nexport const logo = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 144px;\n  height: 144px;\n  border-radius: 50%;\n  border: 1px solid #e8e9ea;\n  box-shadow: 0 0 64px #e8e9ea;\n\n  & svg {\n    width: 96px;\n    height: 96px;\n    /* padding-bottom: 4px; */\n  }\n`\n\nexport const innerCircle = css`\n  width: 192px;\n  height: 192px;\n  border-radius: 50%;\n  border: 1px solid #e8e9ea;\n  position: absolute;\n`\n\nexport const middleCircle = css`\n  width: 240px;\n  height: 240px;\n  border-radius: 50%;\n  border: 1px solid #e8e9eabb;\n  position: absolute;\n`\n\nexport const outerCircle = css`\n  width: 288px;\n  height: 288px;\n  border-radius: 50%;\n  border: 1px solid #e8e9ea66;\n  position: absolute;\n`\n\nexport const title = css`\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  font-weight: 700;\n  font-size: 1.2em;\n  background-image: linear-gradient(#fff0, #fff, #fff);\n  height: 72px;\n  width: calc(100% + 64px);\n`\n\nexport const content = css`\n  padding: 0 16px;\n  width: 100%;\n  max-width: 375px;\n  margin: auto;\n  & form {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  & input {\n    text-align: center;\n    width: 100%;\n    font-size: 1rem;\n    padding: 8px 16px;\n    border-radius: 4px;\n    border: 2px solid #888;\n    user-select: initial;\n    &:focus {\n      outline: none;\n      border-color: #4b47ee;\n    }\n  }\n\n  & button {\n    margin-top: 8px;\n    text-align: center;\n    width: 100%;\n    font-size: 1rem;\n    font-family: inherit;\n    padding: 8px 16px;\n    border-radius: 4px;\n    font-weight: 600;\n    background-color: #4b47ee;\n    color: white;\n    border: 1.5px solid #4b47ee;\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n      background-color: #eeeef6;\n      color: #babac4;\n      border: 1.5px solid #e0e2ea;\n    }\n  }\n`\n\nexport const alert = css`\n  width: 100%;\n  text-align: center;\n  border-radius: 4px;\n  border: 1.5px solid #d33;\n  background-color: #d333;\n  color: #b33;\n  padding: 8px;\n  margin-top: 8px;\n  font-weight: 600;\n`\n\nexport const footer = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #4b47ee;\n  width: 100%;\n  max-width: 375px;\n  padding: 24px 16px;\n  margin: auto;\n  & > a {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    text-decoration: none;\n    color: inherit;\n  }\n  & svg {\n    height: 1rem;\n    width: 1rem;\n    margin-right: 3px;\n  }\n`\n\nexport const hidden = css`\n  /* visibility: hidden; */\n  display: none;\n`\n\nexport const spin = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\n\nexport const loading = css`\n  display: inline-block;\n  width: 1em;\n  height: 1em;\n\n  &:after {\n    content: ' ';\n    display: block;\n    width: 0.75em;\n    height: 0.75em;\n    border-radius: 50%;\n    border: 3px solid;\n    border-color: currentColor currentColor currentColor transparent;\n    animation: ${spin} 1.2s linear infinite;\n  }\n`\n","import AbstractUI, {UIOptions} from '@uauth/abstract-ui'\nimport {\n  alert,\n  close,\n  container,\n  content,\n  footer,\n  header,\n  hidden,\n  innerCircle,\n  loading as loadingStyles,\n  logo,\n  middleCircle,\n  outerCircle,\n  overlay,\n  title,\n} from './styles'\n\nconst nameRegex =\n  /^([a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.)(x|crypto|coin|wallet|bitcoin|888|nft|dao|blockchain)$/\n\nexport interface DomUIOptions {\n  className?: string\n  defaultValue: string\n  container?: HTMLElement\n  document?: Document\n  id: string\n  learnMoreLink: string\n  getADomainLink: string\n}\n\nexport type DomUIConstructorOptions = Partial<DomUIOptions>\n\nclass DomUI<T> implements AbstractUI<T> {\n  public options: DomUIOptions\n\n  getContainer(): HTMLElement {\n    return this.options.container ?? window.document.body\n  }\n\n  getDocument(): Document {\n    return this.options.document ?? window.document\n  }\n\n  constructor(options: DomUIConstructorOptions = {}) {\n    options.id = options.id ?? 'uauth-vanilla-ui'\n    options.learnMoreLink =\n      options.learnMoreLink ??\n      'https://unstoppabledomains.com/blog/login-with-unstoppable'\n    options.getADomainLink =\n      options.getADomainLink ?? 'https://unstoppabledomains.com'\n\n    if (\n      !options.learnMoreLink.startsWith('https://unstoppabledomains.com') ||\n      !options.getADomainLink.startsWith('https://unstoppabledomains.com')\n    ) {\n      throw new Error(\n        'Can only use https://unstoppabledomains.com based links.',\n      )\n    }\n\n    this.options = options as DomUIOptions\n  }\n\n  getInnerHTML(defaultValue: string): string {\n    return /* html */ `\n<div class=\"${overlay}\">\n\n  <div class=\"${container}\">\n    <div id=\"${this.options.id}-close\" class=\"${close}\"></div>\n    <div class=\"${header}\">\n      <div class=\"${logo}\">\n        <div class=\"${innerCircle}\"></div>\n        <div class=\"${middleCircle}\"></div>\n        <div class=\"${outerCircle}\"></div>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\"><path fillRule=\"evenodd\" clip-rule=\"evenodd\" fill=\"#2FE9FF\" d=\"M22.7319 2.06934V9.87229L0 19.094L22.7319 2.06934Z\" /><path fillRule=\"evenodd\" clip-rule=\"evenodd\" fill=\"#4C47F7\" d=\"M18.4696 1.71387V15.1917C18.4696 19.1094 15.2892 22.2853 11.3659 22.2853C7.44265 22.2853 4.26221 19.1094 4.26221 15.1917V9.51682L8.52443 7.17594V15.1917C8.52443 16.5629 9.63759 17.6745 11.0107 17.6745C12.3839 17.6745 13.497 16.5629 13.497 15.1917V4.4449L18.4696 1.71387Z\" /></svg>\n      </div>\n      <div class=\"${title}\">Login with Unstoppable</div>\n    </div>\n\n    <div class=\"${content}\">\n      <form id=\"${this.options.id}-form\">\n        <input \n          id=\"${this.options.id}-input\"\n          type=\"text\"\n          spellcheck=\"false\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          placeholder=\"Enter your domain name\"\n          autofocus\n          value=\"${defaultValue}\"\n          />\n        <div id=\"${this.options.id}-error\" class=\"${alert} ${hidden}\"></div>\n        <button type=\"submit\" id=\"${this.options.id}-button\">Continue</button>\n      </form>\n    </div>\n\n    <div class=\"${footer}\">\n      <a href=\"${this.options.learnMoreLink}\">\n        <svg class=\"svg-inline--fa fa-question-circle fa-w-16\" aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"question-circle\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path fill=\"currentColor\" d=\"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z\"></path>\n        </svg>\n        <div>Learn More</div>\n      </a>\n      <a href=\"${this.options.getADomainLink}\">\n        <svg class=\"svg-inline--fa fa-external-link-alt fa-w-16\" aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"external-link-alt\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path fill=\"currentColor\" d=\"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z\"></path>\n        </svg>\n        <div>Get a Domain</div>\n      </a>\n    </div>\n\n  </div>\n\n</div>\n    `\n  }\n\n  async open(options: UIOptions<T>): Promise<T> {\n    const {className, id} = this.options\n\n    let element: HTMLElement\n    const existingElement = this.getDocument().getElementById(id)\n    if (existingElement) {\n      element = existingElement\n    } else {\n      element = this.getDocument().createElement('div')\n      element.id = id\n    }\n\n    if (typeof className === 'string') {\n      element.className = className\n    }\n    element.classList.add('uauth-vanilla-ui')\n\n    element.innerHTML = this.getInnerHTML(\n      options.defaultValue ?? this.options.defaultValue,\n    )\n\n    if (!element.parentElement) {\n      this.getContainer().appendChild(element)\n    }\n\n    const inputElement: HTMLInputElement = this.getDocument().getElementById(\n      `${this.options.id}-input`,\n    ) as HTMLInputElement\n    if (!inputElement) {\n      throw new Error('Unable to find inputElement in modal')\n    }\n\n    const formElement = this.getDocument().getElementById(\n      `${this.options.id}-form`,\n    ) as HTMLFormElement\n    if (!formElement) {\n      throw new Error('Unable to find formElement in modal')\n    }\n\n    const closeElement = this.getDocument().getElementById(\n      `${this.options.id}-close`,\n    ) as HTMLElement\n    if (!closeElement) {\n      throw new Error('Unable to find closeElement in modal')\n    }\n\n    const errorElement = this.getDocument().getElementById(\n      `${this.options.id}-error`,\n    ) as HTMLElement\n    if (!errorElement) {\n      throw new Error('Unable to find errorElement in modal')\n    }\n\n    const buttonElement = this.getDocument().getElementById(\n      `${this.options.id}-button`,\n    ) as HTMLElement\n    if (!errorElement) {\n      throw new Error('Unable to find buttonElement in modal')\n    }\n\n    function setError(error: Error | void) {\n      if (error) {\n        errorElement.innerText = error.message\n        errorElement.classList.remove(hidden)\n\n        buttonElement.classList.add(hidden)\n      } else {\n        errorElement.innerText = ''\n        errorElement.classList.add(hidden)\n\n        buttonElement.classList.remove(hidden)\n      }\n    }\n\n    let loading = false\n    function setLoading(isLoading: boolean) {\n      loading = isLoading\n\n      if (isLoading) {\n        buttonElement.setAttribute('disabled', 'disabled')\n        buttonElement.innerHTML = `<div class=\"${loadingStyles}\"></div>`\n      } else {\n        buttonElement.removeAttribute('disabled')\n        buttonElement.innerText = 'Continue'\n      }\n    }\n\n    let domain = inputElement.value\n    let shouldClose = true\n    let handleKeydown: (this: Document, ev: KeyboardEvent) => any\n    return new Promise<T>((resolve, reject) => {\n      this.getDocument().addEventListener(\n        'keydown',\n        (handleKeydown = e => {\n          if (e.key === 'Escape') {\n            reject(new Error('Modal closed!'))\n          }\n        }),\n      )\n\n      inputElement.oninput = e => {\n        // This is a trick to make the input non-interactive while the form is submitting\n        if (!loading) {\n          // NOTE: We cannot simply use .replace(/\\s/, '-') because double space periods wouldn't work.\n          // TODO: Simpify this...\n          domain = inputElement.value\n            .toLowerCase()\n            .replace(/(^-)|(^\\s+)/gi, '') // No extra space at front of string\n            .replace(/(-\\s+)|(\\s+-)|(--)/gi, '-') // No double hyphens or extra space next to existing hyphens\n            .replace(/(\\.\\.)|(\\s+\\.)/gi, '.') // No double periods or space before periods\n            .replace(/\\.\\s+([a-z0-9]+)/gi, '.$1') // Removes spaces after periods and before labels\n            .replace(/([a-z0-9]+)\\s+([a-z0-9]+)/gi, '$1-$2') // Replace spaces inbetween words with hyphens\n\n          setError(undefined)\n        }\n        inputElement.value = domain\n      }\n\n      formElement.onsubmit = e => {\n        e.preventDefault()\n        Promise.resolve()\n          .then(async () => {\n            if (!nameRegex.test(domain)) {\n              throw new Error(`Domain ${domain} is invalid`)\n            }\n\n            setLoading(true)\n            resolve(await options.submit(domain))\n            if (!options.closeOnFinish) {\n              shouldClose = false\n            }\n          })\n          .catch(error => {\n            setLoading(false)\n            setError(error)\n          })\n      }\n\n      closeElement.onclick = () => {\n        reject(new Error('Modal closed!'))\n      }\n\n      this._closer = () => {\n        this.getDocument().removeEventListener('keydown', handleKeydown)\n        this.getContainer().removeChild(element)\n      }\n    }).finally(async () => {\n      if (shouldClose) {\n        this.close()\n      }\n    })\n  }\n\n  private _closer?: () => void\n  close(): void {\n    if (this._closer) {\n      this._closer()\n      delete this._closer\n    }\n  }\n}\n\nexport default DomUI\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, stringify, COMMENT, rulesheet, middleware, prefixer, serialize, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar last = function last(arr) {\n  return arr.length ? arr[arr.length - 1] : null;\n}; // based on https://github.com/thysultan/stylis.js/blob/e6843c373ebcbbfade25ebcc23f540ed8508da0a/src/Tokenizer.js#L239-L244\n\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return !!element && element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule') return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses && cache.compat !== true) {\n      var prevElement = index > 0 ? children[index - 1] : null;\n\n      if (prevElement && isIgnoringComment(last(prevElement.children))) {\n        return;\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if ( key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport default createCache;\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport default createEmotion;\n","import '@emotion/cache';\nimport '@emotion/serialize';\nimport '@emotion/utils';\nimport createEmotion from '../create-instance/dist/emotion-css-create-instance.esm.js';\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n"],"sourceRoot":""}